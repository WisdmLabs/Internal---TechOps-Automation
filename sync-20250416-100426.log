++ pwd
+ STATUS_FILE=/home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/.sync-status
++ date +%s
+ echo STARTED:1744797866
+ trap 'echo "FAILED:$(date +%s)" > "$STATUS_FILE"' EXIT
+ trap cleanup_processes EXIT
+++ pwd
++ find_repo_root /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation
++ local current_dir=/home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation
++ local repo_root=
++ '[' /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation '!=' / ']'
++ '[' -d /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/.git ']'
++ repo_root=/home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation
++ break
++ '[' -z /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation ']'
++ echo /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation
+ REPO_ROOT=/home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation
+ echo '[DEBUG] Repository root: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation'
+ BASE_DIR=wp-content
+ PLUGINS_DIR=wp-content/plugins
+ THEMES_DIR=wp-content/themes
+ SYNC_PLUGIN=techops-content-sync
+ mkdir -p wp-content/plugins
[DEBUG] Repository root: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation
+ mkdir -p wp-content/themes
+ mkdir -p /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups
++ date +%Y-%m-%dT%H-%M-%SZ
+ BACKUP_TIMESTAMP=2025-04-16T10-04-26Z
+ BACKUP_DIR=/home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z
+ mkdir -p /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z
+ echo '[DEBUG] Backup directory: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z'
[DEBUG] Backup directory: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z
+ export BACKUP_DIR=/home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z
+ BACKUP_DIR=/home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z
+ PLUGIN_SLUG=
+ THEME_SLUG=
+ [[ 0 -gt 0 ]]
+ trap cleanup EXIT
+ required_commands=("curl" "jq" "base64" "unzip")
+ for cmd in "${required_commands[@]}"
+ command -v curl
+ for cmd in "${required_commands[@]}"
+ command -v jq
+ for cmd in "${required_commands[@]}"
+ command -v base64
+ for cmd in "${required_commands[@]}"
+ command -v unzip
+ required_vars=("LIVE_SITE_AUTH_TOKEN" "STAGING_SITE_AUTH_TOKEN" "LIVE_SITE_URL" "STAGING_SITE_URL")
+ for var in "${required_vars[@]}"
+ '[' -z d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w= ']'
+ for var in "${required_vars[@]}"
+ '[' -z dGVjaG9wczpWMkEzIFpkdXggRFJyWSBnSmRVIDVzV3ogbXFScg== ']'
+ for var in "${required_vars[@]}"
+ '[' -z https://wordpress-1000690-5314661.cloudwaysapps.com ']'
+ for var in "${required_vars[@]}"
+ '[' -z https://techopsautomation.wisdmlabs.net ']'
+ '[' -z /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z ']'
+ '[' '!' -d /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z ']'
+ '[' '!' -w wp-content/plugins ']'
+ '[' '!' -w wp-content/themes ']'
+ required_space=1024
++ df -m .
++ awk 'NR==2 {print $4}'
+ available_space=21784
+ '[' 21784 -lt 1024 ']'
+ mkdir -p /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins
+ mkdir -p /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/themes
+ mkdir -p /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/sync-plugin
+ echo 'Verifying auth tokens format...'
Verifying auth tokens format...
+ for token_var in "LIVE_SITE_AUTH_TOKEN" "STAGING_SITE_AUTH_TOKEN"
+ echo d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w=
+ base64 -d
+ for token_var in "LIVE_SITE_AUTH_TOKEN" "STAGING_SITE_AUTH_TOKEN"
+ echo dGVjaG9wczpWMkEzIFpkdXggRFJyWSBnSmRVIDVzV3ogbXFScg==
+ base64 -d
+ echo 'Starting WordPress content sync...'
Starting WordPress content sync...
Using live site URL: https://wordpress-1000690-5314661.cloudwaysapps.com
+ echo 'Using live site URL: https://wordpress-1000690-5314661.cloudwaysapps.com'
+ echo 'Using staging site URL: https://techopsautomation.wisdmlabs.net'
+ backup_existing_content plugins wp-content/plugins ''
+ local content_type=plugins
+ local source_dir=wp-content/plugins
+ local specific_slug=
+ echo 'Backing up existing plugins...'
+ '[' -z '' ']'
+ '[' -d wp-content/plugins ']'
Using staging site URL: https://techopsautomation.wisdmlabs.net
Backing up existing plugins...
++ ls -A wp-content/plugins
+ '[' 'activation-states.json
advanced-nocaptcha-recaptcha
akismet
bbpress
breeze
classic-editor
contact-form-7
db-access-adminer
download-plugins-dashboard
email-log
googleanalytics.php
hcaptcha-for-forms-and-more
hello.php
object-cache-pro
otter-blocks
stop-emails
td-cloud-library
td-composer
techops-content-sync
updraftplus
wordfence
wordpress-seo
wp-mail-smtp
wp-maintenance-mode
wp-security-audit-log
wpforms-lite' ']'
+ echo 'Backing up all plugins...'
Backing up all plugins...
+ mkdir -p /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins
+ '[' plugins = plugins ']'
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/activation-states.json ']'
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/advanced-nocaptcha-recaptcha ']'
++ basename wp-content/plugins/advanced-nocaptcha-recaptcha
+ '[' advanced-nocaptcha-recaptcha '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/advanced-nocaptcha-recaptcha /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/akismet ']'
++ basename wp-content/plugins/akismet
+ '[' akismet '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/akismet /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/bbpress ']'
++ basename wp-content/plugins/bbpress
+ '[' bbpress '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/bbpress /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/breeze ']'
++ basename wp-content/plugins/breeze
+ '[' breeze '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/breeze /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/classic-editor ']'
++ basename wp-content/plugins/classic-editor
+ '[' classic-editor '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/classic-editor /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/contact-form-7 ']'
++ basename wp-content/plugins/contact-form-7
+ '[' contact-form-7 '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/contact-form-7 /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/db-access-adminer ']'
++ basename wp-content/plugins/db-access-adminer
+ '[' db-access-adminer '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/db-access-adminer /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/download-plugins-dashboard ']'
++ basename wp-content/plugins/download-plugins-dashboard
+ '[' download-plugins-dashboard '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/download-plugins-dashboard /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/email-log ']'
++ basename wp-content/plugins/email-log
+ '[' email-log '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/email-log /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/googleanalytics.php ']'
++ basename wp-content/plugins/googleanalytics.php
+ '[' googleanalytics.php '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/googleanalytics.php /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/hcaptcha-for-forms-and-more ']'
++ basename wp-content/plugins/hcaptcha-for-forms-and-more
+ '[' hcaptcha-for-forms-and-more '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/hcaptcha-for-forms-and-more /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/hello.php ']'
++ basename wp-content/plugins/hello.php
+ '[' hello.php '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/hello.php /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/object-cache-pro ']'
++ basename wp-content/plugins/object-cache-pro
+ '[' object-cache-pro '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/object-cache-pro /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/otter-blocks ']'
++ basename wp-content/plugins/otter-blocks
+ '[' otter-blocks '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/otter-blocks /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/stop-emails ']'
++ basename wp-content/plugins/stop-emails
+ '[' stop-emails '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/stop-emails /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/td-cloud-library ']'
++ basename wp-content/plugins/td-cloud-library
+ '[' td-cloud-library '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/td-cloud-library /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/td-composer ']'
++ basename wp-content/plugins/td-composer
+ '[' td-composer '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/td-composer /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/techops-content-sync ']'
++ basename wp-content/plugins/techops-content-sync
+ '[' techops-content-sync '!=' techops-content-sync ']'
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/updraftplus ']'
++ basename wp-content/plugins/updraftplus
+ '[' updraftplus '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/updraftplus /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/wordfence ']'
++ basename wp-content/plugins/wordfence
+ '[' wordfence '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/wordfence /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/wordpress-seo ']'
++ basename wp-content/plugins/wordpress-seo
+ '[' wordpress-seo '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/wordpress-seo /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/wp-mail-smtp ']'
++ basename wp-content/plugins/wp-mail-smtp
+ '[' wp-mail-smtp '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/wp-mail-smtp /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/wp-maintenance-mode ']'
++ basename wp-content/plugins/wp-maintenance-mode
+ '[' wp-maintenance-mode '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/wp-maintenance-mode /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/wp-security-audit-log ']'
++ basename wp-content/plugins/wp-security-audit-log
+ '[' wp-security-audit-log '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/wp-security-audit-log /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ for item in "$source_dir"/*
+ '[' -d wp-content/plugins/wpforms-lite ']'
++ basename wp-content/plugins/wpforms-lite
+ '[' wpforms-lite '!=' techops-content-sync ']'
+ cp -r wp-content/plugins/wpforms-lite /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/plugins/
+ echo '✅ All plugins backed up successfully'
✅ All plugins backed up successfully
+ backup_existing_content themes wp-content/themes ''
+ local content_type=themes
+ local source_dir=wp-content/themes
+ local specific_slug=
+ echo 'Backing up existing themes...'
Backing up existing themes...
+ '[' -z '' ']'
+ '[' -d wp-content/themes ']'
++ ls -A wp-content/themes
+ '[' 'Newspaper
effectivenews
twentytwentyfive
twentytwentyfour
twentytwentythree' ']'
+ echo 'Backing up all themes...'
Backing up all themes...
+ mkdir -p /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/themes
+ '[' themes = plugins ']'
+ cp -r wp-content/themes/Newspaper wp-content/themes/effectivenews wp-content/themes/twentytwentyfive wp-content/themes/twentytwentyfour wp-content/themes/twentytwentythree /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/themes/
+ echo '✅ All themes backed up successfully'
✅ All themes backed up successfully
+ backup_sync_plugin
+ echo 'Backing up sync plugin...'
Backing up sync plugin...
+ '[' -d wp-content/plugins/techops-content-sync ']'
+ cp -r wp-content/plugins/techops-content-sync /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z/sync-plugin/
+ echo '✅ Sync plugin backed up successfully'
✅ Sync plugin backed up successfully
Fetching plugins list from live site...
+ PLUGINS_PROCESSED=false
+ THEMES_PROCESSED=false
+ PLUGINS_FAILED=false
+ THEMES_FAILED=false
+ echo 'Fetching plugins list from live site...'
++ make_api_request https://wordpress-1000690-5314661.cloudwaysapps.com d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w= /wp-json/techops/v1/plugins/list 'plugins list'
++ local url=https://wordpress-1000690-5314661.cloudwaysapps.com
++ local auth_token=d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w=
++ local endpoint=/wp-json/techops/v1/plugins/list
++ local 'description=plugins list'
+++ mktemp
++ local output_file=/tmp/tmp.pU2o28lbdb
+++ mktemp
++ local headers_file=/tmp/tmp.SUMOm3gEed
++ local max_retries=3
++ local retry_count=0
++ '[' 0 -lt 3 ']'
++ echo 'Making plugins list API request to: https://wordpress-1000690-5314661.cloudwaysapps.com/wp-json/techops/v1/plugins/list'
Making plugins list API request to: https://wordpress-1000690-5314661.cloudwaysapps.com/wp-json/techops/v1/plugins/list
++ echo 'Request headers:'
Request headers:
++ echo 'Authorization: Basic [REDACTED]'
Authorization: Basic [REDACTED]
++ curl -s -H 'Authorization: Basic d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w=' -H 'Accept: application/json' -H 'Content-Type: application/json' --max-time 30 https://wordpress-1000690-5314661.cloudwaysapps.com/wp-json/techops/v1/plugins/list
+++ curl -s -o /dev/null -w '%{http_code}' -H 'Authorization: Basic d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w=' -H 'Accept: application/json' -H 'Content-Type: application/json' --max-time 30 https://wordpress-1000690-5314661.cloudwaysapps.com/wp-json/techops/v1/plugins/list
++ local status_code=200
++ echo 'Response status code: 200'
Response status code: 200
++ echo 'Response body:'
Response body:
++ cat /tmp/tmp.pU2o28lbdb
 [{"name":"Akismet Anti-spam: Spam Protection","slug":"akismet","version":"5.3.7","active":false,"path":"akismet\/akismet.php"},{"name":"bbPress","slug":"bbpress","version":"2.6.12","active":true,"path":"bbpress\/bbpress.php"},{"name":"Breeze","slug":"breeze","version":"2.2.7","active":false,"path":"breeze\/breeze.php"},{"name":"CAPTCHA 4WP","slug":"advanced-nocaptcha-recaptcha","version":"7.5.0","active":false,"path":"advanced-nocaptcha-recaptcha\/advanced-nocaptcha-recaptcha.php"},{"name":"Classic Editor","slug":"classic-editor","version":"1.6.7","active":true,"path":"classic-editor\/classic-editor.php"},{"name":"Contact Form 7","slug":"contact-form-7","version":"6.0.5","active":true,"path":"contact-form-7\/wp-contact-form-7.php"},{"name":"Database Access with Adminer","slug":"db-access-adminer","version":"2.1.0","active":true,"path":"db-access-adminer\/db-access-adminer.php"},{"name":"Download Plugins and Themes from Dashboard","slug":"download-plugins-dashboard","version":"1.9.4","active":true,"path":"download-plugins-dashboard\/download-plugins-from-dashboard.php"},{"name":"Email Log","slug":"email-log","version":"2.4.9","active":true,"path":"email-log\/email-log.php"},{"name":"Google Analytics for WordPress by MonsterInsights","slug":"googleanalytics.php","version":"6.2.0","active":false,"path":"googleanalytics.php"},{"name":"hCaptcha for WP","slug":"hcaptcha-for-forms-and-more","version":"4.11.0","active":true,"path":"hcaptcha-for-forms-and-more\/hcaptcha.php"},{"name":"Hello Dolly","slug":"hello.php","version":"1.7.2","active":false,"path":"hello.php"},{"name":"LightStart - Maintenance Mode, Coming Soon and Landing Page Builder","slug":"wp-maintenance-mode","version":"2.6.16","active":true,"path":"wp-maintenance-mode\/wp-maintenance-mode.php"},{"name":"Object Cache Pro","slug":"object-cache-pro","version":"1.22.0","active":false,"path":"object-cache-pro\/object-cache-pro.php"},{"name":"Otter \u2013 Page Builder Blocks & Extensions for Gutenberg","slug":"otter-blocks","version":"3.0.10","active":true,"path":"otter-blocks\/otter-blocks.php"},{"name":"Stop Emails","slug":"stop-emails","version":"1.2.1","active":true,"path":"stop-emails\/stop-emails.php"},{"name":"tagDiv Cloud Library","slug":"td-cloud-library","version":"3.7 | built on 26.09.2024 10:39","active":true,"path":"td-cloud-library\/td-cloud-library.php"},{"name":"tagDiv Composer","slug":"td-composer","version":"5.2 | built on 26.09.2024 10:39","active":true,"path":"td-composer\/td-composer.php"},{"name":"TechOps Content Sync","slug":"techops-content-sync","version":"1.0.0","active":true,"path":"techops-content-sync\/techops-content-sync.php"},{"name":"UpdraftPlus - Backup\/Restore","slug":"updraftplus","version":"2.23.3.26","active":false,"path":"updraftplus\/updraftplus.php"},{"name":"Wordfence Security","slug":"wordfence","version":"8.0.3","active":true,"path":"wordfence\/wordfence.php"},{"name":"WP Activity Log","slug":"wp-security-audit-log","version":"5.3.3","active":true,"path":"wp-security-audit-log\/wp-security-audit-log.php"},{"name":"WPForms Lite","slug":"wpforms-lite","version":"1.9.4.2","active":true,"path":"wpforms-lite\/wpforms.php"},{"name":"WP Mail SMTP","slug":"wp-mail-smtp","version":"4.4.0","active":true,"path":"wp-mail-smtp\/wp_mail_smtp.php"},{"name":"Yoast SEO","slug":"wordpress-seo","version":"24.6","active":true,"path":"wordpress-seo\/wp-seo.php"}]++ '[' 200 = 200 ']'
++ jq empty /tmp/tmp.pU2o28lbdb
++ echo /tmp/tmp.pU2o28lbdb
++ rm -f /tmp/tmp.SUMOm3gEed
++ return 0
+ PLUGINS_RESPONSE_FILE=/tmp/tmp.pU2o28lbdb
+ PLUGINS_EXIT_CODE=0
+ '[' 0 -eq 0 ']'
+ '[' -f /tmp/tmp.pU2o28lbdb ']'
+ echo 'Processing plugins data...'
Processing plugins data...
+ LIVE_SITE_AUTH_TOKEN=d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w=
+ LIVE_SITE_URL=https://wordpress-1000690-5314661.cloudwaysapps.com
+ BACKUP_DIR=/home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z
+ PLUGIN_SLUG=
+ node scripts/process-plugins.js
[36m[INFO] Skipping excluded plugin: techops-content-sync[0m
[36m[INFO] Processing 24 plugins...[0m
[36m[INFO] 
Processing plugin: akismet[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/akismet[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/akismet.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing akismet directory...[0m
[36m[INFO] Downloading akismet...[0m
[36m[INFO] Extracting akismet...[0m
[36m[INFO] Verifying akismet contents...[0m
[36m[INFO] Plugin directory contains 14 files/directories[0m
[36m[INFO] Updated activation state for akismet[0m
[36m[INFO] ✅ Successfully processed akismet[0m
[36m[INFO] 
Processing plugin: bbpress[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/bbpress[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/bbpress.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing bbpress directory...[0m
[36m[INFO] Downloading bbpress...[0m
[36m[INFO] Extracting bbpress...[0m
[36m[INFO] Verifying bbpress contents...[0m
[36m[INFO] Plugin directory contains 9 files/directories[0m
[36m[INFO] Updated activation state for bbpress[0m
[36m[INFO] ✅ Successfully processed bbpress[0m
[36m[INFO] 
Processing plugin: breeze[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/breeze[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/breeze.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing breeze directory...[0m
[36m[INFO] Downloading breeze...[0m
[36m[INFO] Extracting breeze...[0m
[36m[INFO] Verifying breeze contents...[0m
[36m[INFO] Plugin directory contains 10 files/directories[0m
[36m[INFO] Updated activation state for breeze[0m
[36m[INFO] ✅ Successfully processed breeze[0m
[36m[INFO] 
Processing plugin: advanced-nocaptcha-recaptcha[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/advanced-nocaptcha-recaptcha[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/advanced-nocaptcha-recaptcha.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing advanced-nocaptcha-recaptcha directory...[0m
[36m[INFO] Downloading advanced-nocaptcha-recaptcha...[0m
[36m[INFO] Extracting advanced-nocaptcha-recaptcha...[0m
[36m[INFO] Verifying advanced-nocaptcha-recaptcha contents...[0m
[36m[INFO] Plugin directory contains 9 files/directories[0m
[36m[INFO] Updated activation state for advanced-nocaptcha-recaptcha[0m
[36m[INFO] ✅ Successfully processed advanced-nocaptcha-recaptcha[0m
[36m[INFO] 
Processing plugin: classic-editor[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/classic-editor[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/classic-editor.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing classic-editor directory...[0m
[36m[INFO] Downloading classic-editor...[0m
[36m[INFO] Extracting classic-editor...[0m
[36m[INFO] Verifying classic-editor contents...[0m
[36m[INFO] Plugin directory contains 5 files/directories[0m
[36m[INFO] Updated activation state for classic-editor[0m
[36m[INFO] ✅ Successfully processed classic-editor[0m
[36m[INFO] 
Processing plugin: contact-form-7[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/contact-form-7[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/contact-form-7.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing contact-form-7 directory...[0m
[36m[INFO] Downloading contact-form-7...[0m
[36m[INFO] Extracting contact-form-7...[0m
[36m[INFO] Verifying contact-form-7 contents...[0m
[36m[INFO] Plugin directory contains 10 files/directories[0m
[36m[INFO] Updated activation state for contact-form-7[0m
[36m[INFO] ✅ Successfully processed contact-form-7[0m
[36m[INFO] 
Processing plugin: db-access-adminer[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/db-access-adminer[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/db-access-adminer.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing db-access-adminer directory...[0m
[36m[INFO] Downloading db-access-adminer...[0m
[36m[INFO] Extracting db-access-adminer...[0m
[36m[INFO] Verifying db-access-adminer contents...[0m
[36m[INFO] Plugin directory contains 17 files/directories[0m
[36m[INFO] Updated activation state for db-access-adminer[0m
[36m[INFO] ✅ Successfully processed db-access-adminer[0m
[36m[INFO] 
Processing plugin: download-plugins-dashboard[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/download-plugins-dashboard[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/download-plugins-dashboard.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing download-plugins-dashboard directory...[0m
[36m[INFO] Downloading download-plugins-dashboard...[0m
[36m[INFO] Extracting download-plugins-dashboard...[0m
[36m[INFO] Verifying download-plugins-dashboard contents...[0m
[36m[INFO] Plugin directory contains 7 files/directories[0m
[36m[INFO] Updated activation state for download-plugins-dashboard[0m
[36m[INFO] ✅ Successfully processed download-plugins-dashboard[0m
[36m[INFO] 
Processing plugin: email-log[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/email-log[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/email-log.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing email-log directory...[0m
[36m[INFO] Downloading email-log...[0m
[36m[INFO] Extracting email-log...[0m
[36m[INFO] Verifying email-log contents...[0m
[36m[INFO] Plugin directory contains 9 files/directories[0m
[36m[INFO] Updated activation state for email-log[0m
[36m[INFO] ✅ Successfully processed email-log[0m
[36m[INFO] 
Processing plugin: googleanalytics.php[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/googleanalytics.php[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/googleanalytics.php.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing googleanalytics.php directory...[0m
[36m[INFO] Downloading googleanalytics.php...[0m
[36m[INFO] Extracting googleanalytics.php...[0m
[36m[INFO] Verifying googleanalytics.php contents...[0m
[36m[INFO] Plugin directory contains 40 files/directories[0m
[36m[INFO] Updated activation state for googleanalytics.php[0m
[36m[INFO] ✅ Successfully processed googleanalytics.php[0m
[36m[INFO] 
Processing plugin: hcaptcha-for-forms-and-more[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/hcaptcha-for-forms-and-more[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/hcaptcha-for-forms-and-more.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing hcaptcha-for-forms-and-more directory...[0m
[36m[INFO] Downloading hcaptcha-for-forms-and-more...[0m
[36m[INFO] Extracting hcaptcha-for-forms-and-more...[0m
[36m[INFO] Verifying hcaptcha-for-forms-and-more contents...[0m
[36m[INFO] Plugin directory contains 11 files/directories[0m
[36m[INFO] Updated activation state for hcaptcha-for-forms-and-more[0m
[36m[INFO] ✅ Successfully processed hcaptcha-for-forms-and-more[0m
[36m[INFO] 
Processing plugin: hello.php[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/hello.php[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/hello.php.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing hello.php directory...[0m
[36m[INFO] Downloading hello.php...[0m
[36m[INFO] Extracting hello.php...[0m
[36m[INFO] Verifying hello.php contents...[0m
[36m[INFO] Plugin directory contains 40 files/directories[0m
[36m[INFO] Updated activation state for hello.php[0m
[36m[INFO] ✅ Successfully processed hello.php[0m
[36m[INFO] 
Processing plugin: wp-maintenance-mode[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wp-maintenance-mode[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wp-maintenance-mode.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing wp-maintenance-mode directory...[0m
[36m[INFO] Downloading wp-maintenance-mode...[0m
[36m[INFO] Extracting wp-maintenance-mode...[0m
[36m[INFO] Verifying wp-maintenance-mode contents...[0m
[36m[INFO] Plugin directory contains 11 files/directories[0m
[36m[INFO] Updated activation state for wp-maintenance-mode[0m
[36m[INFO] ✅ Successfully processed wp-maintenance-mode[0m
[36m[INFO] 
Processing plugin: object-cache-pro[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/object-cache-pro[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/object-cache-pro.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing object-cache-pro directory...[0m
[36m[INFO] Downloading object-cache-pro...[0m
[36m[INFO] Extracting object-cache-pro...[0m
[36m[INFO] Verifying object-cache-pro contents...[0m
[36m[INFO] Plugin directory contains 10 files/directories[0m
[36m[INFO] Updated activation state for object-cache-pro[0m
[36m[INFO] ✅ Successfully processed object-cache-pro[0m
[36m[INFO] 
Processing plugin: otter-blocks[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/otter-blocks[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/otter-blocks.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing otter-blocks directory...[0m
[36m[INFO] Downloading otter-blocks...[0m
[36m[INFO] Extracting otter-blocks...[0m
[36m[INFO] Verifying otter-blocks contents...[0m
[36m[INFO] Plugin directory contains 9 files/directories[0m
[36m[INFO] Updated activation state for otter-blocks[0m
[36m[INFO] ✅ Successfully processed otter-blocks[0m
[36m[INFO] 
Processing plugin: stop-emails[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/stop-emails[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/stop-emails.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing stop-emails directory...[0m
[36m[INFO] Downloading stop-emails...[0m
[36m[INFO] Extracting stop-emails...[0m
[36m[INFO] Verifying stop-emails contents...[0m
[36m[INFO] Plugin directory contains 12 files/directories[0m
[36m[INFO] Updated activation state for stop-emails[0m
[36m[INFO] ✅ Successfully processed stop-emails[0m
[36m[INFO] 
Processing plugin: td-cloud-library[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/td-cloud-library[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/td-cloud-library.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing td-cloud-library directory...[0m
[36m[INFO] Downloading td-cloud-library...[0m
[36m[INFO] Extracting td-cloud-library...[0m
[36m[INFO] Verifying td-cloud-library contents...[0m
[36m[INFO] Plugin directory contains 11 files/directories[0m
[36m[INFO] Updated activation state for td-cloud-library[0m
[36m[INFO] ✅ Successfully processed td-cloud-library[0m
[36m[INFO] 
Processing plugin: td-composer[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/td-composer[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/td-composer.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing td-composer directory...[0m
[36m[INFO] Downloading td-composer...[0m
[36m[INFO] Extracting td-composer...[0m
[36m[INFO] Verifying td-composer contents...[0m
[36m[INFO] Plugin directory contains 9 files/directories[0m
[36m[INFO] Updated activation state for td-composer[0m
[36m[INFO] ✅ Successfully processed td-composer[0m
[36m[INFO] 
Processing plugin: updraftplus[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/updraftplus[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/updraftplus.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing updraftplus directory...[0m
[36m[INFO] Downloading updraftplus...[0m
[36m[INFO] Extracting updraftplus...[0m
[36m[INFO] Verifying updraftplus contents...[0m
[36m[INFO] Plugin directory contains 21 files/directories[0m
[36m[INFO] Updated activation state for updraftplus[0m
[36m[INFO] ✅ Successfully processed updraftplus[0m
[36m[INFO] 
Processing plugin: wordfence[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wordfence[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wordfence.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing wordfence directory...[0m
[36m[INFO] Downloading wordfence...[0m
[36m[INFO] Extracting wordfence...[0m
[36m[INFO] Verifying wordfence contents...[0m
[36m[INFO] Plugin directory contains 17 files/directories[0m
[36m[INFO] Updated activation state for wordfence[0m
[36m[INFO] ✅ Successfully processed wordfence[0m
[36m[INFO] 
Processing plugin: wp-security-audit-log[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wp-security-audit-log[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wp-security-audit-log.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing wp-security-audit-log directory...[0m
[36m[INFO] Downloading wp-security-audit-log...[0m
[36m[INFO] Extracting wp-security-audit-log...[0m
[36m[INFO] Verifying wp-security-audit-log contents...[0m
[36m[INFO] Plugin directory contains 14 files/directories[0m
[36m[INFO] Updated activation state for wp-security-audit-log[0m
[36m[INFO] ✅ Successfully processed wp-security-audit-log[0m
[36m[INFO] 
Processing plugin: wpforms-lite[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wpforms-lite[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wpforms-lite.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing wpforms-lite directory...[0m
[36m[INFO] Downloading wpforms-lite...[0m
[36m[INFO] Extracting wpforms-lite...[0m
[36m[INFO] Verifying wpforms-lite contents...[0m
[36m[INFO] Plugin directory contains 11 files/directories[0m
[36m[INFO] Updated activation state for wpforms-lite[0m
[36m[INFO] ✅ Successfully processed wpforms-lite[0m
[36m[INFO] 
Processing plugin: wp-mail-smtp[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wp-mail-smtp[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wp-mail-smtp.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing wp-mail-smtp directory...[0m
[36m[INFO] Downloading wp-mail-smtp...[0m
[36m[INFO] Extracting wp-mail-smtp...[0m
[36m[INFO] Verifying wp-mail-smtp contents...[0m
[36m[INFO] Plugin directory contains 8 files/directories[0m
[36m[INFO] Updated activation state for wp-mail-smtp[0m
[36m[INFO] ✅ Successfully processed wp-mail-smtp[0m
[36m[INFO] 
Processing plugin: wordpress-seo[0m
[36m[INFO] Plugin directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wordpress-seo[0m
[36m[INFO] Plugin zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/plugins/wordpress-seo.zip[0m
Could not determine WordPress version, continuing anyway
[36m[INFO] Removing existing wordpress-seo directory...[0m
[36m[INFO] Downloading wordpress-seo...[0m
[36m[INFO] Extracting wordpress-seo...[0m
[36m[INFO] Verifying wordpress-seo contents...[0m
[36m[INFO] Plugin directory contains 17 files/directories[0m
[36m[INFO] Updated activation state for wordpress-seo[0m
[36m[INFO] ✅ Successfully processed wordpress-seo[0m
[36m[INFO] 
✅ Plugin processing completed successfully[0m
+ PROCESS_EXIT_CODE=0
+ rm -f /tmp/tmp.pU2o28lbdb
+ '[' 0 -eq 0 ']'
+ PLUGINS_PROCESSED=true
+ echo '✅ Plugins processed successfully'
✅ Plugins processed successfully
+ echo 'Fetching themes list from live site...'
Fetching themes list from live site...
++ make_api_request https://wordpress-1000690-5314661.cloudwaysapps.com d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w= /wp-json/techops/v1/themes/list 'themes list'
++ local url=https://wordpress-1000690-5314661.cloudwaysapps.com
++ local auth_token=d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w=
++ local endpoint=/wp-json/techops/v1/themes/list
++ local 'description=themes list'
+++ mktemp
++ local output_file=/tmp/tmp.CBgVDQ85kR
+++ mktemp
++ local headers_file=/tmp/tmp.Ka6l4HMgyV
++ local max_retries=3
++ local retry_count=0
++ '[' 0 -lt 3 ']'
++ echo 'Making themes list API request to: https://wordpress-1000690-5314661.cloudwaysapps.com/wp-json/techops/v1/themes/list'
Making themes list API request to: https://wordpress-1000690-5314661.cloudwaysapps.com/wp-json/techops/v1/themes/list
++ echo 'Request headers:'
Request headers:
++ echo 'Authorization: Basic [REDACTED]'
Authorization: Basic [REDACTED]
++ curl -s -H 'Authorization: Basic d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w=' -H 'Accept: application/json' -H 'Content-Type: application/json' --max-time 30 https://wordpress-1000690-5314661.cloudwaysapps.com/wp-json/techops/v1/themes/list
+++ curl -s -o /dev/null -w '%{http_code}' -H 'Authorization: Basic d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w=' -H 'Accept: application/json' -H 'Content-Type: application/json' --max-time 30 https://wordpress-1000690-5314661.cloudwaysapps.com/wp-json/techops/v1/themes/list
++ local status_code=200
++ echo 'Response status code: 200'
Response status code: 200
++ echo 'Response body:'
Response body:
++ cat /tmp/tmp.CBgVDQ85kR
 [{"name":"Newspaper","slug":"Newspaper","version":"12.6.8","active":true,"path":"\/home\/1000690.cloudwaysapps.com\/gkxkpmbpvk\/public_html\/wp-content\/themes\/Newspaper"},{"name":"Effective","slug":"effectivenews","version":"6.1","active":false,"path":"\/home\/1000690.cloudwaysapps.com\/gkxkpmbpvk\/public_html\/wp-content\/themes\/effectivenews"},{"name":"Twenty Twenty-Five","slug":"twentytwentyfive","version":"1.1","active":false,"path":"\/home\/1000690.cloudwaysapps.com\/gkxkpmbpvk\/public_html\/wp-content\/themes\/twentytwentyfive"},{"name":"Twenty Twenty-Four","slug":"twentytwentyfour","version":"1.3","active":false,"path":"\/home\/1000690.cloudwaysapps.com\/gkxkpmbpvk\/public_html\/wp-content\/themes\/twentytwentyfour"},{"name":"Twenty Twenty-Three","slug":"twentytwentythree","version":"1.6","active":false,"path":"\/home\/1000690.cloudwaysapps.com\/gkxkpmbpvk\/public_html\/wp-content\/themes\/twentytwentythree"}]++ '[' 200 = 200 ']'
++ jq empty /tmp/tmp.CBgVDQ85kR
++ echo /tmp/tmp.CBgVDQ85kR
++ rm -f /tmp/tmp.Ka6l4HMgyV
++ return 0
+ THEMES_RESPONSE_FILE=/tmp/tmp.CBgVDQ85kR
+ THEMES_EXIT_CODE=0
+ '[' 0 -eq 0 ']'
+ '[' -f /tmp/tmp.CBgVDQ85kR ']'
+ echo 'Processing themes data...'
Processing themes data...
+ LIVE_SITE_AUTH_TOKEN=d2lzZG06czF6WiBDSWxJIDF2QmMgOWU1biBZUk1MIDFrU0w=
+ LIVE_SITE_URL=https://wordpress-1000690-5314661.cloudwaysapps.com
+ BACKUP_DIR=/home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups/backup-2025-04-16T10-04-26Z
+ THEME_SLUG=
+ node scripts/process-themes.js
[36m[INFO] Processing 5 themes...[0m
[36m[INFO] 
Processing theme: Newspaper[0m
[36m[INFO] Theme directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/themes/Newspaper[0m
[36m[INFO] Theme zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/themes/Newspaper.zip[0m
[36m[INFO] Removing existing Newspaper directory...[0m
[36m[INFO] Downloading Newspaper...[0m
[36m[INFO] Extracting Newspaper...[0m
[36m[INFO] Verifying Newspaper contents...[0m
[36m[INFO] Theme directory contains 34 files/directories[0m
[36m[INFO] ✅ Successfully processed Newspaper[0m
[36m[INFO] 
Processing theme: effectivenews[0m
[36m[INFO] Theme directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/themes/effectivenews[0m
[36m[INFO] Theme zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/themes/effectivenews.zip[0m
[36m[INFO] Removing existing effectivenews directory...[0m
[36m[INFO] Downloading effectivenews...[0m
[36m[INFO] Extracting effectivenews...[0m
[36m[INFO] Verifying effectivenews contents...[0m
[36m[INFO] Theme directory contains 42 files/directories[0m
[36m[INFO] ✅ Successfully processed effectivenews[0m
[36m[INFO] 
Processing theme: twentytwentyfive[0m
[36m[INFO] Theme directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/themes/twentytwentyfive[0m
[36m[INFO] Theme zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/themes/twentytwentyfive.zip[0m
[36m[INFO] Removing existing twentytwentyfive directory...[0m
[36m[INFO] Downloading twentytwentyfive...[0m
[36m[INFO] Extracting twentytwentyfive...[0m
[36m[INFO] Verifying twentytwentyfive contents...[0m
[36m[INFO] Theme directory contains 10 files/directories[0m
[36m[INFO] ✅ Successfully processed twentytwentyfive[0m
[36m[INFO] 
Processing theme: twentytwentyfour[0m
[36m[INFO] Theme directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/themes/twentytwentyfour[0m
[36m[INFO] Theme zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/themes/twentytwentyfour.zip[0m
[36m[INFO] Removing existing twentytwentyfour directory...[0m
[36m[INFO] Downloading twentytwentyfour...[0m
[36m[INFO] Extracting twentytwentyfour...[0m
[36m[INFO] Verifying twentytwentyfour contents...[0m
[36m[INFO] Theme directory contains 10 files/directories[0m
[36m[INFO] ✅ Successfully processed twentytwentyfour[0m
[36m[INFO] 
Processing theme: twentytwentythree[0m
[36m[INFO] Theme directory path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/themes/twentytwentythree[0m
[36m[INFO] Theme zip path: /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/wp-content/themes/twentytwentythree.zip[0m
[36m[INFO] Removing existing twentytwentythree directory...[0m
[36m[INFO] Downloading twentytwentythree...[0m
[36m[INFO] Extracting twentytwentythree...[0m
[36m[INFO] Verifying twentytwentythree contents...[0m
[36m[INFO] Theme directory contains 9 files/directories[0m
[36m[INFO] ✅ Successfully processed twentytwentythree[0m
[36m[INFO] 
✅ Theme processing completed successfully[0m
+ PROCESS_EXIT_CODE=0
+ rm -f /tmp/tmp.CBgVDQ85kR
+ '[' 0 -eq 0 ']'
+ THEMES_PROCESSED=true
+ echo '✅ Themes processed successfully'
✅ Themes processed successfully
+ '[' true = true ']'
+ '[' true = true ']'
+ echo '✅ Both plugins and themes processed successfully'
✅ Both plugins and themes processed successfully
Verifying final content in wp-content directories:
Plugins directory:
+ echo 'Verifying final content in wp-content directories:'
+ echo 'Plugins directory:'
+ ls -la wp-content/plugins
total 112
drwxr-xr-x 27 runner docker 4096 Apr 16 10:06 .
drwxr-xr-x  4 runner docker 4096 Apr 16 10:04 ..
-rw-r--r--  1 runner docker 1622 Apr 16 10:06 activation-states.json
drwxr-xr-x  7 runner docker 4096 Apr 16 10:04 advanced-nocaptcha-recaptcha
drwxr-xr-x  4 runner docker 4096 Apr 16 10:04 akismet
drwxr-xr-x  4 runner docker 4096 Apr 16 10:04 bbpress
drwxr-xr-x  8 runner docker 4096 Apr 16 10:04 breeze
drwxr-xr-x  4 runner docker 4096 Apr 16 10:04 classic-editor
drwxr-xr-x  7 runner docker 4096 Apr 16 10:04 contact-form-7
drwxr-xr-x  3 runner docker 4096 Apr 16 10:04 db-access-adminer
drwxr-xr-x  5 runner docker 4096 Apr 16 10:04 download-plugins-dashboard
drwxr-xr-x  6 runner docker 4096 Apr 16 10:04 email-log
drwxr-xr-x 36 runner docker 4096 Apr 16 10:05 googleanalytics.php
drwxr-xr-x  7 runner docker 4096 Apr 16 10:05 hcaptcha-for-forms-and-more
drwxr-xr-x 36 runner docker 4096 Apr 16 10:05 hello.php
drwxr-xr-x  5 runner docker 4096 Apr 16 10:05 object-cache-pro
drwxr-xr-x  6 runner docker 4096 Apr 16 10:05 otter-blocks
drwxr-xr-x  5 runner docker 4096 Apr 16 10:05 stop-emails
drwxr-xr-x 11 runner docker 4096 Apr 16 10:05 td-cloud-library
drwxr-xr-x  8 runner docker 4096 Apr 16 10:05 td-composer
drwxr-xr-x  3 runner docker 4096 Apr 16 10:04 techops-content-sync
drwxr-xr-x 13 runner docker 4096 Apr 16 10:05 updraftplus
drwxr-xr-x 15 runner docker 4096 Apr 16 10:06 wordfence
drwxr-xr-x 13 runner docker 4096 Apr 16 10:06 wordpress-seo
drwxr-xr-x  6 runner docker 4096 Apr 16 10:06 wp-mail-smtp
drwxr-xr-x  7 runner docker 4096 Apr 16 10:05 wp-maintenance-mode
drwxr-xr-x 11 runner docker 4096 Apr 16 10:06 wp-security-audit-log
drwxr-xr-x  9 runner docker 4096 Apr 16 10:06 wpforms-lite
+ echo 'Themes directory:'
+ ls -la wp-content/themes
Themes directory:
total 28
drwxr-xr-x  7 runner docker 4096 Apr 16 10:06 .
drwxr-xr-x  4 runner docker 4096 Apr 16 10:04 ..
drwxr-xr-x  6 runner docker 4096 Apr 16 10:06 Newspaper
drwxr-xr-x 13 runner docker 4096 Apr 16 10:06 effectivenews
drwxr-xr-x  7 runner docker 4096 Apr 16 10:06 twentytwentyfive
drwxr-xr-x  7 runner docker 4096 Apr 16 10:06 twentytwentyfour
drwxr-xr-x  7 runner docker 4096 Apr 16 10:06 twentytwentythree
++ ls -A wp-content/plugins
+ '[' '!' 'activation-states.json
advanced-nocaptcha-recaptcha
akismet
bbpress
breeze
classic-editor
contact-form-7
db-access-adminer
download-plugins-dashboard
email-log
googleanalytics.php
hcaptcha-for-forms-and-more
hello.php
object-cache-pro
otter-blocks
stop-emails
td-cloud-library
td-composer
techops-content-sync
updraftplus
wordfence
wordpress-seo
wp-mail-smtp
wp-maintenance-mode
wp-security-audit-log
wpforms-lite' ']'
++ ls -A wp-content/themes
+ '[' '!' 'Newspaper
effectivenews
twentytwentyfive
twentytwentyfour
twentytwentythree' ']'
+ echo 'Content sync completed successfully!'
+ cleanup
Content sync completed successfully!
Cleaning up temporary files and old backups...
+ local exit_code=0
+ echo 'Cleaning up temporary files and old backups...'
+ find . -name '*.tmp' -type f -delete
+ '[' -d /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups ']'
+ cd /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation/_backups
+ ls -t
+ tail -n +4
+ xargs -r rm -rf
+ cd /home/runner/work/Internal---TechOps-Automation/Internal---TechOps-Automation
+ '[' 0 -eq 0 ']'
++ date +%s
+ echo COMPLETED:1744797994
+ exit 0
